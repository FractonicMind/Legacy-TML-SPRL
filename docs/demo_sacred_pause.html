<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Sacred Pause Demo (Safe Mode)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0b0f14;color:#e8eef5;margin:0}
  main{max-width:860px;margin:0 auto;padding:32px}
  h1{margin:0 0 12px}
  .card{background:#111826;border:1px solid #1f2a37;border-radius:14px;padding:20px;margin-top:16px}
  textarea{width:100%;height:100px;background:#0f1720;color:#e8eef5;border:1px solid #243041;border-radius:10px;padding:12px;font-size:16px}
  button{background:#2563eb;border:none;color:white;padding:10px 16px;border-radius:10px;font-weight:600;cursor:pointer}
  .pause{margin-top:14px;color:#fbbf24;font-weight:600}
  .trace{margin-top:12px;line-height:1.6}
  .badge{margin-top:10px;font-size:18px}
  .note{opacity:.75;font-size:13px;margin-top:8px}
</style>
</head>
<body>
<main>
  <h1>‚è∏Ô∏è Sacred Pause ‚Äî Browser Demo (Safe Mode)</h1>
  <p>**Deny-by-default.** Only vetted prompts are allowed to proceed. All else holds or refuses.</p>

  <div class="card">
    <textarea id="prompt" placeholder="Try: 'What is the capital of Japan?' or 'Write a haiku about rain'">What is the capital of Japan?</textarea><br/>
    <button id="run">Run Sacred Pause</button>
    <div class="note">Unknown prompts ‚Üí üü° Hold. Risky prompts ‚Üí ‚ùå Refuse.</div>
    <div id="out" class="trace"></div>
  </div>
</main>

<script>
function pause(ms){return new Promise(r=>setTimeout(r,ms));}

// ---------- STRICT SAFE MODE LOGIC ----------

// 1) Blocklist: broad, conservative
const BLOCK_PATTERNS = [
  // weapons/explosives
  /\b(bomb|pipe\s*bomb|ied|explosive|detonator|blasting\s*cap|anfo|tnt|thermite|napalm|ammonium\s*nitrate|grenade)\b/i,
  /\b(ghost\s*gun|silencer|firearm|gun|weapon|ammo|ammunition)\b/i,
  // violent wrongdoing
  /\b(kill|murder|hurt|harm|attack|stab|shoot|strangle|poison|assault|kidnap|torture|beat\s*up|execute)\b/i,
  // hacking / cybercrime
  /\b(hack|ddos|exploit|zero[-\s]?day|backdoor|malware|ransomware|keylogger|rootkit|bypass\s+(auth|login|immobilizer|lock)|credential\s*stuffing)\b/i,
  // dangerous chemicals/synthesis (non-exhaustive)
  /\b(fentanyl|methamphetamine|sarin|ricin|tcep|tnt|anfo|ether\s+wash|red\s+phosphorus)\b/i,
  // self-harm crisis
  /\b(i\s*(want|plan|am\s+going)\s*to\s*(kill\s*myself|die|suicide|end\s*my\s*life)|self[-\s]*harm|hurt\s*myself)\b/i
];

// 2) Whitelist: tiny set of safe prompts ‚Üí Proceed
// (Add only what you are comfortable showcasing publicly.)
const WHITELIST = [
  // Facts
  {q:/\b(capital of japan)\b/i, a:"Tokyo"},
  {q:/\b(apollo\s*11|moon\s*landing.*year)\b/i, a:"1969"},
  {q:/\b(chemical symbol for gold)\b/i, a:"Au"},
  {q:/\b(square root of 144)\b/i, a:"12"},
  {q:/\b(planet.*red)\b/i, a:"Mars"},
  {q:/\b(largest ocean)\b/i, a:"Pacific Ocean"},
  // Creative / benign
  {q:/\b(haiku|short poem).*rain\b/i, a:"Soft rain taps the pane\nCity breathes a cooler hush\nLeaves keep tiny time."},
  {q:/\b(tell me about mercury)\b/i, a:"Do you mean Mercury the planet or the element? (üü° Hold if ambiguous)"},
];

// Decision
function decide(prompt) {
  const p = (prompt||"").toLowerCase().trim();

  // Self-harm supportive refusal
  if (/\b(i\s*(want|plan|am\s+going)\s*to\s*(kill\s*myself|die|suicide|end\s*my\s*life)|self[-\s]*harm|hurt\s*myself)\b/i.test(p)) {
    return {
      state:"-1",
      triggers:["ethical_risk"],
      checks:["safety_policy"],
      answer:"I‚Äôm really sorry you‚Äôre feeling this way, but I can‚Äôt help with that. If you‚Äôre in danger, call local emergency services. You‚Äôre not alone‚Äîplease consider reaching out to someone you trust or a professional."
    };
  }

  // Hard refuse on any risky pattern
  for (const rx of BLOCK_PATTERNS) {
    if (rx.test(p)) {
      return { state:"-1", triggers:["ethical_risk"], checks:["safety_policy"], answer:"I must refuse for safety reasons." };
    }
  }

  // Proceed only if whitelisted
  for (const rule of WHITELIST) {
    if (rule.q.test(p)) {
      return { state:"+1", triggers:["light_fact_verify"], checks:["factual_check"], answer:rule.a };
    }
  }

  // Everything else ‚Üí Hold (safe default)
  return { state:"0", triggers:["unknown_or_ambiguous"], checks:["intent_audit"], answer:"I need clarification before proceeding." };
}

// Badge
function badge(state){
  return ({"+1":"‚úÖ +1 Proceed","0":"üü° 0 Hold","-1":"‚ùå ‚àí1 Refuse"})[state] || "üü° 0 Hold";
}

// Run
document.getElementById("run").onclick = async ()=>{
  const prompt = document.getElementById("prompt").value.trim();
  const out = document.getElementById("out");

  out.innerHTML = `<div class="pause">‚è≥ Pausing to think‚Ä¶</div>`;
  await pause(900);

  const d = decide(prompt);

  out.innerHTML = `
    <div><strong>Why I paused:</strong> ${d.triggers.join(", ")}</div>
    <div><strong>Checks I ran:</strong> ${d.checks.join(", ")}</div>
    <div class="badge">${badge(d.state)}</div>
    <div style="margin-top:10px;"><strong>Output:</strong> ${d.answer}</div>
  `;
};
</script>
</body>
</html>
