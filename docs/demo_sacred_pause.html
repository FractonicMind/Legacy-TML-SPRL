<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Sacred Pause Demo (Safe Mode)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0b0f14;color:#e8eef5;margin:0}
  main{max-width:860px;margin:0 auto;padding:32px}
  h1{margin:0 0 12px}
  .card{background:#111826;border:1px solid #1f2a37;border-radius:14px;padding:20px;margin-top:16px}
  textarea{width:100%;height:100px;background:#0f1720;color:#e8eef5;border:1px solid #243041;border-radius:10px;padding:12px;font-size:16px}
  button{background:#2563eb;border:none;color:white;padding:10px 16px;border-radius:10px;font-weight:600;cursor:pointer}
  .pause{margin-top:14px;color:#fbbf24;font-weight:600}
  .trace{margin-top:12px;line-height:1.6}
  .badge{margin-top:10px;font-size:18px}
  .note{opacity:.75;font-size:13px;margin-top:8px}
</style>
</head>
<body>
<main>
  <h1>‚è∏Ô∏è Sacred Pause ‚Äî Browser Demo (Safe Mode)</h1>
  <p><strong>Deny-by-default.</strong> Only vetted prompts may proceed. Risky prompts refuse. Everything else holds.</p>

  <div class="card">
    <textarea id="prompt" placeholder="Try: 'What is the capital of Japan?' or 'Write a haiku about rain'">What is the capital of Japan?</textarea><br/>
    <button id="run">Run Sacred Pause</button>
    <div class="note">Unknown prompts ‚Üí üü° Hold. Risky prompts ‚Üí ‚ùå Refuse.</div>
    <div id="out" class="trace"></div>
  </div>
</main>

<script>
function pause(ms){return new Promise(r=>setTimeout(r,ms));}

// ---------------- STRICT SAFE MODE ----------------

// 1) Blocklist: broad and conservative

// Weapons & explosives (verbs handled separately via intent check too)
const RX_WEAPONS_EXPLOSIVES_1 = /\b(bomb|pipe\s*bomb|ied|explosive|detonator|blasting\s*cap|anfo|tnt|thermite|napalm|ammonium\s*nitrate|grenade)\b/i;
const RX_WEAPONS_EXPLOSIVES_2 = /\b(ghost\s*gun|silencer|firearm|gun|weapon|ammo|ammunition)\b/i;

// Violent wrongdoing (people-targeted violence)
const RX_VIOLENCE = /\b(kill|murder|hurt|harm|attack|stab|shoot|strangle|poison|assault|kidnap|torture|beat\s*up|execute)\b/i;

// Hacking / cybercrime
const RX_HACKING = /\b(hack|ddos|exploit|zero[-\s]?day|backdoor|malware|ransomware|keylogger|rootkit|bypass\s+(auth|login|immobilizer|lock)|credential\s*stuffing)\b/i;

// Dangerous synthesis / illicit drugs / CBRN-ish cues (non-exhaustive demo)
const RX_DANGEROUS_CHEM = /\b(fentanyl|methamphetamine|sarin|ricin|tcep|ether\s+wash|red\s+phosphorus)\b/i;

// Self-harm / crisis
const RX_SELF_HARM = /\b(i\s*(want|plan|am\s+going)\s*to\s*(kill\s*myself|die|suicide|end\s*my\s*life)|self[-\s]*harm|hurt\s*myself)\b/i;

// Property & financial crimes
const RX_PROPERTY_FIN = /\b(rob|steal|burglariz(e|e)|burglary|break[-\s]?in|home\s+invasion|shoplift|pickpocket|mug|hold[-\s]?up|arson|vandaliz(e|e)|trespass|stalk|blackmail|extort|doxx|swat|phish|scam|fraud|launder(ing)?)\b/i;

// Arson phrasing using "burn down <target>" style
const RX_BURN_ARSON = /\bburn(\s+down)?\s+(the\s+|a\s+)?(house|home|building|school|library|bank|car|store|shop)\b/i;

// Generic criminal intent verbs + any of the above crime cues (belt & suspenders)
const RX_INTENT = /\b(help\s+me|how\s+to|how\s+do\s+i|i\s+want\s+to|i\s+plan\s+to|teach\s+me|guide\s+me|show\s+me|best\s+way\s+to|step\s+by\s+step|instructions\s+to)\b/i;

// Ambiguity cues (harmless uncertainty)
const RX_AMBIG = /\b(maybe|not\s+sure|reset\s+it|tickets|account|report|apple\s+support|clarify|explain\s+more)\b/i;

// Combined hard-risk test
function isRisky(p){
  // Self-harm handled with supportive message
  if (RX_SELF_HARM.test(p)) return "self_harm";

  // Direct risky terms or arson phrasing
  if (RX_WEAPONS_EXPLOSIVES_1.test(p) || RX_WEAPONS_EXPLOSIVES_2.test(p) ||
      RX_VIOLENCE.test(p) || RX_HACKING.test(p) || RX_DANGEROUS_CHEM.test(p) ||
      RX_PROPERTY_FIN.test(p) || RX_BURN_ARSON.test(p)) return "safety_policy";

  // Intent + any crime cue (strong signal)
  if (RX_INTENT.test(p) && (RX_WEAPONS_EXPLOSIVES_1.test(p) || RX_WEAPONS_EXPLOSIVES_2.test(p) ||
                            RX_VIOLENCE.test(p) || RX_HACKING.test(p) || RX_DANGEROUS_CHEM.test(p) ||
                            RX_PROPERTY_FIN.test(p) || RX_BURN_ARSON.test(p))) return "safety_policy";

  return "";
}

// 2) Tiny whitelist: only these proceed (everything else holds)
const WHITELIST = [
  {q:/\b(capital of japan)\b/i, a:"Tokyo"},
  {q:/\b(apollo\s*11|moon\s*landing.*year)\b/i, a:"1969"},
  {q:/\b(chemical symbol for gold)\b/i, a:"Au"},
  {q:/\b(square root of 144)\b/i, a:"12"},
  {q:/\b(planet.*red)\b/i, a:"Mars"},
  {q:/\b(largest ocean)\b/i, a:"Pacific Ocean"},
  {q:/\b(haiku|short poem).*rain\b/i, a:"Soft rain taps the pane\nCity breathes a cooler hush\nLeaves keep tiny time."}
];

// 3) Decision function (deny-by-default)
function decide(prompt) {
  const p = (prompt||"").toLowerCase().trim();

  // Self-harm supportive refusal
  if (RX_SELF_HARM.test(p)) {
    return {
      state:"-1",
      triggers:["ethical_risk"],
      checks:["safety_policy"],
      answer:"I‚Äôm really sorry you‚Äôre feeling this way, but I can‚Äôt help with that. If you‚Äôre in danger, call local emergency services. You‚Äôre not alone‚Äîplease consider reaching out to someone you trust or a professional."
    };
  }

  // Risky ‚Üí refuse
  const risk = isRisky(p);
  if (risk) {
    return { state:"-1", triggers:["ethical_risk"], checks:[risk], answer:"I must refuse for safety reasons." };
  }

  // Whitelisted ‚Üí proceed with safe answer
  for (const rule of WHITELIST) {
    if (rule.q.test(p)) {
      return { state:"+1", triggers:["light_fact_verify"], checks:["factual_check"], answer:rule.a };
    }
  }

  // Everything else ‚Üí hold
  return { state:"0", triggers:["unknown_or_ambiguous"], checks:["intent_audit"], answer:"I need clarification before proceeding." };
}

function badge(state){
  return ({"+1":"‚úÖ +1 Proceed","0":"üü° 0 Hold","-1":"‚ùå ‚àí1 Refuse"})[state] || "üü° 0 Hold";
}

document.getElementById("run").onclick = async ()=>{
  const prompt = document.getElementById("prompt").value.trim();
  const out = document.getElementById("out");

  out.innerHTML = `<div class="pause">‚è≥ Pausing to think‚Ä¶</div>`;
  await pause(900);

  const d = decide(prompt);

  out.innerHTML = `
    <div><strong>Why I paused:</strong> ${d.triggers.join(", ")}</div>
    <div><strong>Checks I ran:</strong> ${d.checks.join(", ")}</div>
    <div class="badge">${badge(d.state)}</div>
    <div style="margin-top:10px;"><strong>Output:</strong> ${d.answer}</div>
  `;
};
</script>
</body>
</html>
